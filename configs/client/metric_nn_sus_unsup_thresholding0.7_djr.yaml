## Client ##
type: MetricClient

ce_loss:
  weight: 1

prox_loss:
  weight: 0

metric_loss:
  loss_type: supervised
  topk_pos: 1
  topk_neg: 2
  temp: 0.05
  pairs:
    - name: metric
      pos: nn
      neg: nn
      weight: 1
      loss_type: supervised
    - name: metric2
      pos: "nn"
      neg: "nn"
      weight: 1
      loss_type: unsupervised
      neg_sample_type: intra_class_thresholding
      threshold: 0.7
  weight: 1
  branch_level: [0,1,2,3,4]
  feature_relu: True
  djr:
    use : True
    margin:
      epsilon : 0
    bal:
      sample : 1
      prob : 0
      featnorm : 0
      norm_mode : 'sqrt4' #[sum, L2]
      norm_scale_crit : 'topk_neg' #[topk_neg, num_unique_labels]
      gamma : 1
  # interpolation_type: full

feature_align_loss:
  weight: 0
  align_type: cosine
      

# interpolation:
#   ce_weight: 1
#   kl_weight: 1
#   type: stochastic
#   forward_type: layer
#   low: 0
#   high: 0
#   branch: [l, i]
#   branch_probs: [0.33, 0.66]
#   repeat: 1
#   temp: 1
#   feature_relu: False
